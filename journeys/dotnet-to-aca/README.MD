# ZERO 2 HERO - .NET code to Azure Container Apps

![image](../../media/banners/dotnet-to-aca.PNG)

## Contents
- [Learning objectives](#learning-objectives)
- [Success criteria](#success-criteria)
- [1. Setup your environment](#1-setup-your-environment)
- [2. Create the App](#2-create-the-app)
- [3. Add the User entity](#3-add-the-user-entity)
- [4. Add the new Service](#4-add-the-new-service)
- [5. Test it locally](#5-test-it-locally)
- [6. Add documentation](#6-add-documentation)
- [7. Deploy to Azure](#7-deploy-to-azure)
- [Conclusion](#conclusion)

## Learning objectives

👉🏼 Create a new .NET App from scratch.  
👉🏼 Code and test.  
👉🏼 Add documentation.  
👉🏼 Deploy to Azure Container Apps.  

## Success criteria

🎯 Show your **HERO** App running on Azure Container Apps.

## 1. Setup your environment

Follow this [guide](../setup/) to configure your environment and login to GitHub and Azure.

## 2. Create the App

<details>
<summary>💡 GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `steps to create a .NET blazor server app called HeroBlazorApp in the terminal and include pre-requirements`
</details>
<br/>  

🟦 Run the `dotnet new` command generated by GitHub Copilot.  
🟦 Install any suggested VS Code extension.  

## 3. Add the User entity

🟦 Create and open a new file named `User.cs` under the folder `Data`.  

<details>
<summary>💡 GitHub Copilot tip</summary>

> [<img src="../../media/copilot/inline-chat.svg" alt="You can press Ctrl+I on your keyboard to bring up Copilot inline chat" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_inline-chat)
> 
> `create a User class in the HeroBlazorApp.Data namespace with id, name, username, email, phone and website properties and json mapping`
</details>
<br/>  

## 4. Change the razor page to add the new Service

🟦 Open the `Program.cs` file.  
🟦 Place the cursor before the `builder.Build` instruction.  

<details>
<summary>💡 GitHub Copilot tip</summary>

> [<img src="../../media/copilot/inline-chat.svg" alt="You can press Ctrl+I on your keyboard to bring up Copilot inline chat" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_inline-chat)
> 
> `add builder for user service singleton and http client`
</details>
<br/>  

🟦 Add the `AddSingleton` and `AddHttpClient` generated code.  
🟦 Open the `Pages/FetchData.razor` file and select all the content.  

<details>
<summary>💡 GitHub Copilot tip</summary>

> [<img src="../../media/copilot/inline-chat.svg" alt="You can press Ctrl+I on your keyboard to bring up Copilot inline chat" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_inline-chat)
> 
> `change this razor page with the router /fetchdata that display user information from the user service`
</details>
<br/>  

🟦 Accept the generated content.  

## 5. Test it locally

<details>
<summary>💡 GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `run my app`
</details>
<br/>  

🟦 Save all the files.  
🟦 Run `dotnet run` on the terminal.  
🟦 Open the browser and test the App.  

## 6. Add documentation

<details>
<summary>💡 GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `create a readme file in markdown format for this project`
</details>
<br/>  

🟦 Click on the `...` and choose `insert into New file`.  
🟦 Save the file as `READNE.md`.  

## 7. Deploy to Azure

<details>
<summary>💡 GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `use the az containerapp up command to deploy my app named heroblazorapp with external ingress on an environment named heroenv, a resource group named zero2hero-blazor located in west europe with the source parameter as "."`
</details>
<br/>  

🟦 Click on the `...` and choose `insert into Terminal`.  
🟦 Run the `az` command and wait until it finishes.  
🟦 Open the provided URL and test your App.  
🟦 Open the Azure Portal and check the resources that were created with the `az containerapp up` command.  
🟦 Open the Log Analytics workspace and browse to the `ContainerAppConsoleLogs_CL` table to see the App logs.  

## Conclusion

### ✨ Let's review GitHub Copilot

- Identified requirements and generated the command to create the App?  
- Generated entire new C# classes to extend the App and assisted to improve the code?  
- Generated documentation in markdown format based on the project context?  
- Generated the all-in-one command to deploy the App in Azure Container Apps?  

### 🗑️ Clean up Azure resources

When you're finished with the lab, you should remove all your deployed resources from Azure to avoid extra charges and keep your Azure subscription uncluttered.