# ZERO 2 HERO - .NET code to Azure Container Apps

![image](../../media/banners/dotnet-to-aca.PNG)

## Contents
- [Learning objectives](#learning-objectives)
- [Success criteria](#success-criteria)
- [1. Setup your environment](#1-setup-your-environment)
- [2. Create the App](#2-create-the-app)
- [3. Add the User entity](#3-add-the-user-entity)
- [4. Add the new Service](#4-add-the-new-service)
- [5. Test it locally](#5-test-it-locally)
- [6. Add documentation](#6-add-documentation)
- [7. Deploy to Azure](#7-deploy-to-azure)
- [Conclusion](#conclusion)

## Learning objectives

ğŸ‘‰ğŸ¼ Create a new .NET App from scratch.  
ğŸ‘‰ğŸ¼ Code and test.  
ğŸ‘‰ğŸ¼ Add documentation.  
ğŸ‘‰ğŸ¼ Deploy to Azure Container Apps.  

## Success criteria

ğŸ¯ Show your **HERO** App running on Azure Container Apps.

## 1. Setup your environment

Follow this [guide](../setup/) to configure your environment and login to GitHub and Azure.

## 2. Create the App

We want to ask GitHub Copilot Chat about the steps we need to do to create a Blazor serverside .NET application. The name of the app should be HeroBlazorApp. Ensure that the prerequirements are included.

<details>
<summary>ğŸ’¡ GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `steps to create a .NET blazor server app called HeroBlazorApp in the terminal and include pre-requirements`
</details>
<br/>  

ğŸŸ¦ Run the `dotnet new` command generated by GitHub Copilot.  
ğŸŸ¦ Install any suggested VS Code extension.  

## 3. Add the User entity

ğŸŸ¦ Create and open a new file named `User.cs` under the folder `Data`.  

Now we want to create a User entity, preferably as a User class in the HeroBlazorApp.Data namespace. A User has the following properties: id, name, username, email, phone number and website. We also want to do a JSON mapping. You can use GitHub Copilot Chat or inline completion.

<details>
<summary>ğŸ’¡ GitHub Copilot tip</summary>

> [<img src="../../media/copilot/inline-chat.svg" alt="You can press Ctrl+I on your keyboard to bring up Copilot inline chat" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_inline-chat)
> 
> `create a User class in the HeroBlazorApp.Data namespace with id, name, username, email, phone and website properties and json mapping`
</details>
<br/>  

## 4. Change the razor page to add the new Service

ğŸŸ¦ Open the `Program.cs` file.  
ğŸŸ¦ Place the cursor before the `builder.Build` instruction.  

Next we want to add a builder for a User service singleton and a http client. Feel free to use GitHub Copilot in whatever way you are most comfortable with to keep you in your coding flow.

<details>
<summary>ğŸ’¡ GitHub Copilot tip</summary>

> [<img src="../../media/copilot/inline-chat.svg" alt="You can press Ctrl+I on your keyboard to bring up Copilot inline chat" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_inline-chat)
> 
> `add builder for user service singleton and http client`
</details>
<br/>  

ğŸŸ¦ Add the `AddSingleton` and `AddHttpClient` generated code.  
ğŸŸ¦ Open the `Pages/FetchData.razor` file and select all the content.  

And then we want to edit our Razor page to display the user informations that we have fetched from our user service.

<details>
<summary>ğŸ’¡ GitHub Copilot tip</summary>

> [<img src="../../media/copilot/inline-chat.svg" alt="You can press Ctrl+I on your keyboard to bring up Copilot inline chat" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_inline-chat)
> 
> `change this razor page with the router /fetchdata that display user information from the user service`
</details>
<br/>  

ğŸŸ¦ Accept the generated content.  

## 5. Test it locally

Finally we want to test our code. Ask GitHub Copilot Chat how to run the application locally.

<details>
<summary>ğŸ’¡ GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `run my app`
</details>
<br/>  

ğŸŸ¦ Save all the files.  
ğŸŸ¦ Run `dotnet run` on the terminal.  
ğŸŸ¦ Open the browser and test the App.  

## 6. Add documentation

No one likes writing documentation, but everyone needs documentation. Luckily GitHub Copilot can also help you with that. Ask GitHub Copilot Chat to support you writing a `README.md` for our project.

<details>
<summary>ğŸ’¡ GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `create a readme file in markdown format for this project`
</details>
<br/>  

ğŸŸ¦ Click on the `...` and choose `insert into New file`.  
ğŸŸ¦ Save the file as `READNE.md`.  

## 7. Deploy to Azure

Everything is up, running and documented? Great, now let's deploy it to Azure Container Apps. For this simple task we can use the Azure CLI. Use GitHub Copilot Chat to ensure all needed parameters are set and we have access to our App by creating an external ingress in the Azure region of your choice.

<details>
<summary>ğŸ’¡ GitHub Copilot tip</summary>

> [<img src="../../media/copilot/chat-view.svg" alt="You can access the Chat view via the Activity Bar or by pressing Ctrl+Alt+I" width="250"/>](https://code.visualstudio.com/docs/copilot/copilot-chat#_chat-view)
> 
> `use the az containerapp up command to deploy my app named heroblazorapp with external ingress on an environment named heroenv, a resource group named zero2hero-blazor located in west europe with the source parameter as "."`
</details>
<br/>  

ğŸŸ¦ Click on the `...` and choose `insert into Terminal`.  
ğŸŸ¦ Run the `az` command and wait until it finishes.  
ğŸŸ¦ Open the provided URL and test your App.  
ğŸŸ¦ Open the Azure Portal and check the resources that were created with the `az containerapp up` command.  
ğŸŸ¦ Open the Log Analytics workspace and browse to the `ContainerAppConsoleLogs_CL` table to see the App logs.  

## Conclusion

### âœ¨ Let's review GitHub Copilot

- Identified requirements and generated the command to create the App?  
- Generated entire new C# classes to extend the App and assisted to improve the code?  
- Generated documentation in markdown format based on the project context?  
- Generated the all-in-one command to deploy the App in Azure Container Apps?  

### ğŸ—‘ï¸ Clean up Azure resources

When you're finished with the lab, you should remove all your deployed resources from Azure to avoid extra charges and keep your Azure subscription uncluttered.

#### ğŸ“ˆ You had any problems with this journey, an idea how to improve it or an idea for a new journey? We are looking forward for your feedback as an issue or pull request. âœ¨